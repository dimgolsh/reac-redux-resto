{"version":3,"sources":["components/app-header/shopping-cart-solid.svg","components/app/food-bg.jpg","components/menu-list-item/index.js","components/menu-list-item/menu-list-item.js","components/resto-service-context/index.js","components/resto-service-context/resto-service-context.js","components/hoc/index.js","components/hoc/with-resto-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error/index.js","components/error/error.js","components/menu-list/menu-list.js","components/menu-list/index.js","components/pages/main-page.js","components/cart-table/cart-table.js","components/cart-table/index.js","components/pages/cart-page.js","components/pages/item-page.js","components/app-header/index.js","components/app-header/app-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/resto-service.js","reducers/index.js","store.js","index.js"],"names":["module","exports","MenuListItem","menuItem","onAddToCart","title","price","url","category","className","to","id","src","alt","onClick","RestoServiceContext","React","createContext","WithRestoService","Wrapped","props","Consumer","RestoService","menuLoaded","newMenu","type","payload","menuRequested","addedToCart","menuError","Spinner","Error","MenuList","this","getMenuItems","then","res","catch","error","menuItems","loading","items","map","key","Component","mapDispatchToProps","View","connect","state","menu","MainPage","generateOrder","item","qtty","deleteFromCart","CartTable","length","setOrder","console","log","CartPage","ItemPage","find","el","match","params","AppHeader","totalPrice","cartIcon","App","style","background","Background","path","component","exact","ErrorBoundry","setState","children","getResorce","a","fetch","_apiBase","ok","status","json","some","JSON","parse","getResource","order","getOrderNumber","number","newOrder","method","headers","body","stringify","orderNumber","initialState","reducer","action","itemInd","findIndex","itemInState","newItem","slice","idx","itemIndex","store","createStore","restoService","ReactDOM","render","Provider","value","document","getElementById"],"mappings":"kFAAAA,EAAOC,QAAU,IAA0B,iD,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mRCC5BC,G,MCGM,SAAC,GAA6B,IAA5BC,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,YACtBC,EAA+BF,EAA/BE,MAAOC,EAAwBH,EAAxBG,MAAOC,EAAiBJ,EAAjBI,IAAKC,EAAYL,EAAZK,SAC1B,OAEQ,wBAAIC,UAAU,cAEV,kBAAC,IAAD,CAAMC,GAAE,WAAQP,EAASQ,KACzB,yBAAKF,UAAU,eAAeJ,GAC9B,yBAAKI,UAAU,YAAYG,IAAKL,EAAKM,IAAI,gBACzC,yBAAKJ,UAAU,kBAAf,aAA0C,8BAAOD,IACjD,yBAAKC,UAAU,eAAf,UAAoC,8BAAOH,EAAP,MACpC,4BAAQQ,QAAS,kBAAIV,KAAcK,UAAU,aAA7C,eACA,0BAAMA,UAAS,6BAA0BD,S,OCd1CO,ECAcC,IAAMC,gBCApBC,ECCU,kBAAM,SAACC,GAC5B,OAAO,SAACC,GACJ,OACI,kBAAC,EAAoBC,SAArB,MAEQ,SAACC,GACG,OAAO,kBAACH,EAAD,iBAAaC,EAAb,CAAoBE,aAAcA,WCT3DC,EAAa,SAACC,GAChB,MAAO,CACHC,KAAM,cACNC,QAASF,IAIXG,EAAgB,WAClB,MAAO,CACHF,KAAM,mBAMRG,EAAc,SAACjB,GACjB,MAAO,CACHc,KAAM,mBACNC,QAASf,IAaXkB,EAAY,WACd,MAAO,CACHJ,KAAM,eC/BCK,G,MCAC,WACZ,OAAO,yBAAKrB,UAAU,WAAf,gBCDIsB,ECAD,WACV,OAAO,yBAAKtB,UAAU,SAAf,UCMLuB,E,kLACiB,IAAD,OAClBC,KAAKb,MAAMO,gBAEcM,KAAKb,MAAtBE,aACKY,eACVC,MAAK,SAACC,GAAD,OAAS,EAAKhB,MAAMG,WAAWa,MACpCC,OAAM,SAACC,GAAD,OAAW,EAAKlB,MAAMS,iB,+BAGvB,IAAD,EAC4CI,KAAKb,MAAhDmB,EADD,EACCA,UAAWC,EADZ,EACYA,QAASF,EADrB,EACqBA,MAAOV,EAD5B,EAC4BA,YAEnC,GAAIY,EACF,OAAO,kBAAC,EAAD,MAET,GAAIF,EACF,OAAO,kBAAC,EAAD,MAGT,IAAMG,EAAQF,EAAUG,KAAI,SAACvC,GAC3B,OAAO,kBAAC,EAAD,CAAcwC,IAAKxC,EAASQ,GAAIR,SAAUA,EAAUC,YAAa,kBAAIwB,EAAYzB,EAASQ,UAGnG,OAAO,kBAAC,EAAD,CAAM8B,MAAOA,Q,GAxBDG,aAoCjBC,EAAqB,CACzBtB,aACAI,gBACAE,YACAD,eAGIkB,EAAO,SAAC,GAAe,IAAbL,EAAY,EAAZA,MACd,OAAO,wBAAIhC,UAAU,cAAcgC,ICpDtBT,EDuDAd,IACb6B,aApBsB,SAACC,GACvB,MAAO,CACLT,UAAWS,EAAMC,KACjBT,QAASQ,EAAMR,QACfF,MAAOU,EAAMV,SAgBUO,EAAzBE,CAA6Cf,IEhDhCkB,EANE,WACb,OACI,kBAAC,EAAD,OCuCFC,G,MAAgB,SAACV,GAOrB,OANiBA,EAAMC,KAAI,SAACU,GAC1B,MAAO,CACLzC,GAAIyC,EAAKzC,GACT0C,KAAMD,EAAKC,WAWXR,EAAqB,CACzBS,eRrCqB,SAAC3C,GACpB,MAAO,CACHc,KAAM,wBACNC,QAASf,KSxBF4C,ED6DArC,IACb6B,aAXsB,SAAC,GACvB,MAAO,CACLN,MAFmC,EAAZA,SAWAI,EAAzBE,EA3DgB,SAAC,GAA6C,IAA3CN,EAA0C,EAA1CA,MAAOa,EAAmC,EAAnCA,eAAgBhC,EAAmB,EAAnBA,aAC1C,OAAqB,IAAjBmB,EAAMe,OACD,yBAAK/C,UAAU,eAAf,2GAIP,oCACE,yBAAKA,UAAU,eAAf,sDACA,yBAAKA,UAAU,cACZgC,EAAMC,KAAI,SAACU,GAAU,IACZ/C,EAAgC+C,EAAhC/C,MAAOC,EAAyB8C,EAAzB9C,MAAOC,EAAkB6C,EAAlB7C,IAAKI,EAAayC,EAAbzC,GAAI0C,EAASD,EAATC,KAC/B,OACE,yBAAKV,IAAKhC,EAAIF,UAAU,cACtB,yBAAKG,IAAKL,EAAKE,UAAU,iBAAiBI,IAAKR,IAC/C,yBAAKI,UAAU,oBAAoBJ,GACnC,yBAAKI,UAAU,oBACZH,EADH,OACc+C,GAEd,yBAAKvC,QAAS,kBAAMwC,EAAe3C,IAAKF,UAAU,eAAlD,aAOR,4BACEK,QAAS,WACPQ,EAAamC,SAASN,EAAcV,IAAQN,MAAK,WAC/CuB,QAAQC,IAAI,cAGhBlD,UAAU,SANZ,wFEnBSmD,EARE,WACb,OACI,yBAAKnD,UAAU,QACX,kBAAC,EAAD,QCGNoD,G,wLACiB,IAAD,OAClB5B,KAAKb,MAAMO,gBAEcM,KAAKb,MAAtBE,aACKY,eACVC,MAAK,SAACC,GAAD,OAAS,EAAKhB,MAAMG,WAAWa,MACpCC,OAAM,SAACC,GAAD,OAAW,EAAKlB,MAAMS,iB,+BAGvB,IAAD,SAC4CI,KAAKb,MAAhDmB,EADD,EACCA,UAAWC,EADZ,EACYA,QAASF,EADrB,EACqBA,MAAOV,EAD5B,EAC4BA,YAEnC,GAAIY,EACF,OAAO,kBAAC,EAAD,MAET,GAAIF,EACF,OAAO,kBAAC,EAAD,MAGToB,QAAQC,IAAI1B,KAAKb,OAEjB,IAAMgC,EAAOb,EAAUuB,MAAK,SAAAC,GAAE,OAAKA,EAAGpD,MAAQ,EAAKS,MAAM4C,MAAMC,OAAOtD,MAC/DN,EAAmC+C,EAAnC/C,MAAOC,EAA4B8C,EAA5B9C,MAAOC,EAAqB6C,EAArB7C,IAAKC,EAAgB4C,EAAhB5C,SAAUG,EAAMyC,EAANzC,GAGpC,OACI,wBAAIF,UAAU,cAGd,yBAAKA,UAAU,eAAeJ,GAC9B,yBAAKI,UAAU,YAAYG,IAAKL,EAAKM,IAAI,gBACzC,yBAAKJ,UAAU,kBAAf,aAA0C,8BAAOD,IACjD,yBAAKC,UAAU,eAAf,UAAoC,8BAAOH,EAAP,MACpC,4BAAQQ,QAAS,kBAAIc,EAAYjB,IAAKF,UAAU,aAAhD,eACA,0BAAMA,UAAS,6BAA0BD,U,GAnCzBoC,cAiDlBC,EAAqB,CACzBtB,aACAI,gBACAE,YACAD,eAGaV,MACb6B,aAhBsB,SAACC,GACvB,MAAO,CACLT,UAAWS,EAAMC,KACjBT,QAASQ,EAAMR,QACfF,MAAOU,EAAMV,SAYUO,EAAzBE,CAA6Cc,I,iBChEhCK,G,MC0BAnB,aAPS,SAAC,GACrB,MAAM,CACFoB,WAFkC,EAAhBA,cAOXpB,EArBG,SAAC,GAAkB,IAAjBoB,EAAgB,EAAhBA,WAChB,OACI,4BAAQ1D,UAAU,UACd,kBAAC,IAAD,CAAMA,UAAU,eAAeC,GAAG,KAAlC,QAGA,kBAAC,IAAD,CAAMD,UAAU,eAAeC,GAAG,SAC9B,yBAAKD,UAAU,eAAeG,IAAKwD,IAAUvD,IAAI,SADrD,UAEYsD,EAFZ,W,yBCXGE,EC0BAnD,KApBH,SAAC,GAAsB,IAApBI,EAAmB,EAAnBA,aAEb,OADAoC,QAAQC,IAAIrC,EAAaY,gBAEvB,yBACEoC,MAAO,CAAEC,WAAW,OAAD,OAASC,IAAT,oCACnB/D,UAAU,OAEV,kBAAC,EAAD,CAAW0D,WAAY,KACvB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOM,KAAK,IAAIC,UAAWxB,EAAUyB,OAAK,IAC1C,kBAAC,IAAD,CAAOF,KAAK,QAAQC,UAAWd,EAAUe,OAAK,IAC9C,kBAAC,IAAD,CAAOF,KAAK,OAAOC,UAAWb,EAAUc,OAAK,SCjBtCC,E,4MCEb5B,MAAQ,CACNV,OAAO,G,kEAIPL,KAAK4C,SAAS,CAAEvC,OAAO,M,+BAGvB,OAAIL,KAAKe,MAAMV,MACN,kBAAC,EAAD,MAEFL,KAAKb,MAAM0D,a,GAZoBlC,a,wBCoCrBtB,E,WACnB,aAAe,IAAD,gCAIdyD,WAJc,uCAID,WAAOxE,GAAP,iBAAAyE,EAAA,sEACOC,MAAM,GAAD,OAAI,EAAKC,UAAT,OAAoB3E,IADhC,WACL6B,EADK,QAEF+C,GAFE,sBAGH,IAAIpD,MAAJ,wBAA2BxB,EAA3B,mBAAyC6B,EAAIgD,SAH1C,uBAKQhD,EAAIiD,OALZ,cAKLC,EALK,yBAOJA,GAPI,2CAJC,2DAcdpD,aAdc,sBAcC,4BAAA8C,EAAA,6DAEXK,EAAOE,KAAKC,MAxDR,k1CAsDO,kBAINH,EAAI,MAJE,2CAbbpD,KAAKiD,SAAW,wB,6FAmBJvE,G,yFACMsB,KAAKwD,YAAY,U,cAA7BrD,E,OACNsB,QAAQC,IAAIvB,GACNgB,EAAOhB,EAAI0B,MAAK,SAACC,GAErB,OADAL,QAAQC,IAAR,iBAAsBI,EAAGpD,GAAzB,iBAAoCA,IAC7BoD,EAAGpD,MAAQA,KAEpB+C,QAAQC,IAAIP,G,kBACLA,G,+KAGMsC,G,yFACQzD,KAAK0D,iB,cAApBC,E,OACAC,EAAW,CACflF,GAAIiF,EACJF,MAAOA,G,SAEcT,MAAM,GAAD,OAAIhD,KAAKiD,SAAT,WAA4B,CACtDY,OAAQ,OACRC,QAAS,CACP,eAAgB,kCAElBC,KAAMT,KAAKU,UAAUJ,K,iBAETV,G,sBACN,IAAIpD,MAAM,c,gRAKAE,KAAK8C,WAAW,Y,cAA5B3C,E,OACA8D,EAAc9D,EAAIoB,OAAS,E,kBAE1B0C,G,qIC7FLC,EAAe,CACnBlD,KAAM,GACNT,SAAS,EACTF,OAAO,EACPG,MAAM,GACN0B,WAAY,GAoFCiC,EAlFC,WAAmC,IAAlCpD,EAAiC,uDAAzBmD,EAAcE,EAAW,uCAChD,OAAQA,EAAO5E,MACb,IAAK,cACH,OAAO,eACFuB,EADL,CAEEC,KAAMoD,EAAO3E,QACbc,SAAS,EACTF,OAAO,IAEX,IAAK,gBACH,OAAO,eACFU,EADL,CAEEC,KAAMD,EAAMC,KACZT,SAAS,EACTF,OAAO,IAGX,IAAK,aACH,OAAO,eACFU,EADL,CAEEC,KAAMD,EAAMC,KACZT,SAAS,EACTF,OAAO,IAGT,IAAK,mBACH,IAAM3B,EAAK0F,EAAO3E,QAEZ4E,EAAUtD,EAAMP,MAAM8D,WAAU,SAAAnD,GAAI,OAAIA,EAAKzC,KAAOA,KAC1D,GAAI2F,GAAW,EAAE,CACb,IAAME,EAAcxD,EAAMP,MAAMqB,MAAK,SAAAV,GAAI,OAAIA,EAAKzC,KAAOA,KACnD8F,EAAO,eACND,EADM,CAETnD,OAAQmD,EAAYnD,OAExB,OAAO,eACAL,EADP,CAEIP,MAAM,GAAD,mBACEO,EAAMP,MAAMiE,MAAM,EAAGJ,IADvB,CAEDG,GAFC,YAGEzD,EAAMP,MAAMiE,MAAMJ,EAAU,KAEnCnC,WAAYnB,EAAMmB,WAAasC,EAAQnG,QAK/C,IAAM8C,EAAOJ,EAAMC,KAAKa,MAAK,SAAAV,GAAI,OAAIA,EAAKzC,KAAOA,KAC3C8F,EAAU,CACZpG,MAAO+C,EAAK/C,MACZC,MAAO8C,EAAK9C,MACZC,IAAK6C,EAAK7C,IACVI,GAAIyC,EAAKzC,GACT0C,KAAM,GAGV,OAAO,eACAL,EADP,CAEIP,MAAM,GAAD,mBACEO,EAAMP,OADR,CAEDgE,IAEJtC,WAAYnB,EAAMmB,WAAasC,EAAQnG,QAGzC,IAAK,wBACH,IAAMqG,EAAMN,EAAO3E,QACbkF,EAAY5D,EAAMP,MAAM8D,WAAU,SAAAnD,GAAI,OAAIA,EAAKzC,KAAOgG,KACtDrG,EAAQ0C,EAAMP,MAAMmE,GAAZ,MAAkC5D,EAAMP,MAAMmE,GAAZ,KAChD,OAAO,eACA5D,EADP,CAEIP,MAAM,GAAD,mBACEO,EAAMP,MAAMiE,MAAM,EAAGE,IADvB,YAEE5D,EAAMP,MAAMiE,MAAME,EAAY,KAErCzC,WAAYnB,EAAMmB,WAAa7D,IAE3C,QACE,OAAO0C,IChFE6D,EAFDC,YAAYV,GCQpBW,G,MAAe,IAAIzF,GAEzB0F,IAASC,OACP,kBAAC,IAAD,CAAUJ,MAAOA,GACf,kBAAC,EAAD,KACE,kBAAC,EAAoBK,SAArB,CAA8BC,MAAOJ,GACnC,kBAAC,IAAD,KACE,kBAAC,EAAD,UAKRK,SAASC,eAAe,W","file":"static/js/main.0f22ec61.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shopping-cart-solid.701d6d1d.svg\";","module.exports = __webpack_public_path__ + \"static/media/food-bg.698e5e80.jpg\";","import MenuListItem from './menu-list-item';\nexport default MenuListItem;","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport './menu-list-item.scss';\n\nconst MenuListItem = ({menuItem, onAddToCart}) => {\n    const {title, price, url, category} = menuItem;\n    return (\n     \n            <li className=\"menu__item\">\n\n                <Link to = {`/${menuItem.id}`}>\n                <div className=\"menu__title\">{title}</div>\n                <img className=\"menu__img\" src={url} alt=\"Cesar salad\"></img>\n                <div className=\"menu__category\">Category: <span>{category}</span></div>\n                <div className=\"menu__price\">Price: <span>{price}$</span></div>\n                <button onClick={()=>onAddToCart()}className=\"menu__btn\">Add to cart</button>\n                <span className = {`menu__category_Img ${category}`}></span>\n                </Link>\n            </li>\n    \n    )\n}\n\nexport default MenuListItem;","import RestoServiceContext from './resto-service-context';\n\nexport default RestoServiceContext;","import React from 'react';\r\n\r\nconst RestoServiceContext  = React.createContext();\r\n\r\nexport default RestoServiceContext;","import WithRestoService from './with-resto-service';\n\nexport default WithRestoService;","import React from 'react';\nimport RestoServiceContext from '../resto-service-context';\n\nconst WithRestoService = () => (Wrapped) => {\n    return (props) =>{\n        return (\n            <RestoServiceContext.Consumer>\n                {\n                    (RestoService) => {\n                        return <Wrapped {...props} RestoService={RestoService}/>\n                    }\n                }\n            </RestoServiceContext.Consumer>\n        )\n    };\n};\n\nexport default WithRestoService;","const menuLoaded = (newMenu) => {\r\n    return {\r\n        type: 'MENU_LOADED',\r\n        payload: newMenu\r\n    }\r\n}\r\n\r\nconst menuRequested = () => {\r\n    return {\r\n        type: 'MENU_REQUESTED',\r\n    \r\n    }\r\n}\r\n\r\n\r\nconst addedToCart = (id) => {\r\n    return {\r\n        type: 'ITEM_ADD_TO_CART',\r\n        payload: id\r\n    \r\n    }\r\n}\r\n\r\nconst deleteFromCart = (id) => {\r\n    return {\r\n        type: 'ITEM_REMOVE_FROM_CART',\r\n        payload: id\r\n    \r\n    }\r\n}\r\n\r\nconst menuError = () => {\r\n    return {\r\n        type: 'MENU_ERROR',\r\n    \r\n    }\r\n}\r\n\r\nexport {\r\n    menuLoaded,\r\n    menuRequested,\r\n    menuError,\r\n    addedToCart,\r\n    deleteFromCart\r\n};","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nconst Spinner = () => {\n    return <div className=\"spinner\">loading...</div>\n}\n\nexport default Spinner;","import Error from './error';\n\nexport default Error;","import React from 'react';\n\nconst Error = () => {\n    return <div className=\"error\">Error</div>\n}\n\nexport default Error;","import React, { Component } from \"react\";\nimport MenuListItem from \"../menu-list-item\";\nimport { connect } from \"react-redux\";\nimport WithRestoService from \"../hoc\";\nimport { menuLoaded, menuRequested, menuError, addedToCart} from \"../../actions\";\nimport \"./menu-list.scss\";\nimport Spinner from \"../spinner\";\nimport Error from \"../error\";\n\nclass MenuList extends Component {\n  componentDidMount() {\n    this.props.menuRequested();\n\n    const { RestoService } = this.props;\n    RestoService.getMenuItems()\n      .then((res) => this.props.menuLoaded(res))\n      .catch((error) => this.props.menuError());\n  }\n\n  render() {\n    const { menuItems, loading, error, addedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />;\n    }\n    if (error) {\n      return <Error />;\n    }\n\n    const items = menuItems.map((menuItem) => {\n      return <MenuListItem key={menuItem.id} menuItem={menuItem} onAddToCart={()=>addedToCart(menuItem.id)} />;\n    });\n\n    return <View items={items} />;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    menuItems: state.menu,\n    loading: state.loading,\n    error: state.error,\n  };\n};\n\nconst mapDispatchToProps = {\n  menuLoaded,\n  menuRequested,\n  menuError,\n  addedToCart\n};\n\nconst View = ({ items }) => {\n  return <ul className=\"menu__list\">{items}</ul>;\n};\n\nexport default WithRestoService()(\n  connect(mapStateToProps, mapDispatchToProps)(MenuList)\n);\n","import MenuList from './menu-list';\nexport default MenuList;","import React from 'react';\nimport MenuList from '../menu-list';\n\nconst MainPage = () => {\n    return (\n        <MenuList/>\n    )\n}\n\nexport default MainPage;\n","import React from \"react\";\nimport \"./cart-table.scss\";\nimport { connect } from \"react-redux\";\nimport { deleteFromCart } from \"../../actions\";\nimport WithRestoService from \"../hoc\";\nconst CartTable = ({ items, deleteFromCart, RestoService }) => {\n  if (items.length === 0) {\n    return <div className=\"cart__title\"> Ваша корзина пуста :( </div>;\n  }\n\n  return (\n    <>\n      <div className=\"cart__title\">Ваш заказ:</div>\n      <div className=\"cart__list\">\n        {items.map((item) => {\n          const { title, price, url, id, qtty } = item;\n          return (\n            <div key={id} className=\"cart__item\">\n              <img src={url} className=\"cart__item-img\" alt={title}></img>\n              <div className=\"cart__item-title\">{title}</div>\n              <div className=\"cart__item-price\">\n                {price}$ * {qtty}\n              </div>\n              <div onClick={() => deleteFromCart(id)} className=\"cart__close\">\n                &times;\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <button\n        onClick={() => {\n          RestoService.setOrder(generateOrder(items)).then(() => {\n            console.log(\"Egdddd\");\n          });\n        }}\n        className=\"order\"\n      >\n        Оформить заказ\n      </button>\n    </>\n  );\n};\n\nconst generateOrder = (items) => {\n  const newOrder = items.map((item) => {\n    return {\n      id: item.id,\n      qtty: item.qtty,\n    };\n  });\n  return newOrder;\n};\nconst mapStateToProps = ({ items }) => {\n  return {\n    items,\n  };\n};\n\nconst mapDispatchToProps = {\n  deleteFromCart,\n};\n\nexport default WithRestoService()(\n  connect(mapStateToProps, mapDispatchToProps)(CartTable)\n);\n","import CartTable from './cart-table';\n\nexport default CartTable;","import React from 'react';\nimport CartTable from '../cart-table';\n\nconst CartPage = () => {\n    return (\n        <div className=\"cart\"> \n            <CartTable/>\n        </div>\n    )\n}\n\nexport default CartPage;","import React, { Component } from \"react\";\r\nimport MenuListItem from \"../menu-list-item\";\r\nimport { connect } from \"react-redux\";\r\nimport WithRestoService from \"../hoc\";\r\nimport { menuLoaded, menuRequested, menuError, addedToCart } from \"../../actions\";\r\nimport \"./item-page.css\";\r\nimport Spinner from \"../spinner\";\r\nimport Error from \"../error\";\r\n\r\nclass ItemPage  extends Component {\r\n  componentDidMount() {\r\n    this.props.menuRequested();\r\n\r\n    const { RestoService } = this.props;\r\n    RestoService.getMenuItems()\r\n      .then((res) => this.props.menuLoaded(res))\r\n      .catch((error) => this.props.menuError());\r\n  }\r\n\r\n  render() {\r\n    const { menuItems, loading, error, addedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n    if (error) {\r\n      return <Error />;\r\n    }\r\n\r\n    console.log(this.props);\r\n\r\n    const item = menuItems.find(el => +el.id === +this.props.match.params.id);\r\n    const {title, price, url, category, id} = item;\r\n\r\n\r\n    return (\r\n        <li className=\"menu__item\">\r\n\r\n       \r\n        <div className=\"menu__title\">{title}</div>\r\n        <img className=\"menu__img\" src={url} alt=\"Cesar salad\"></img>\r\n        <div className=\"menu__category\">Category: <span>{category}</span></div>\r\n        <div className=\"menu__price\">Price: <span>{price}$</span></div>\r\n        <button onClick={()=>addedToCart(id)} className=\"menu__btn\">Add to cart</button>\r\n        <span className = {`menu__category_Img ${category}`}></span>\r\n    </li>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    menuItems: state.menu,\r\n    loading: state.loading,\r\n    error: state.error,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  menuLoaded,\r\n  menuRequested,\r\n  menuError,\r\n  addedToCart\r\n};\r\n\r\nexport default WithRestoService()(\r\n  connect(mapStateToProps, mapDispatchToProps)(ItemPage)\r\n);\r\n","import AppHeader from './app-header';\n\nexport default AppHeader;","import React from 'react';\nimport cartIcon from './shopping-cart-solid.svg';\nimport './app-header.scss';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\n\n\nconst AppHeader = ({totalPrice}) => {\n    return (\n        <header className=\"header\">\n            <Link className=\"header__link\" to='/'>\n                Menu\n            </Link>\n            <Link className=\"header__link\" to='/cart'>\n                <img className=\"header__cart\" src={cartIcon} alt=\"cart\"></img>\n                Total: {totalPrice} $\n            </Link>\n        </header>\n    )\n};\n\nconst mapStateToProps = ({totalPrice}) => {\n    return{\n        totalPrice\n    }\n  }\n  \n\nexport default connect(mapStateToProps)(AppHeader);","import App from './app';\n\nexport default App;","import React from \"react\";\nimport { MainPage, CartPage, ItemPage } from \"../pages\";\nimport AppHeader from \"../app-header\";\nimport WithRestoService from \"../hoc\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport Background from \"./food-bg.jpg\";\n\nconst App = ({ RestoService }) => {\n  console.log(RestoService.getMenuItems());\n  return (\n    <div\n      style={{ background: `url(${Background}) center center/cover no-repeat` }}\n      className=\"app\"\n    >\n      <AppHeader totalPrice={50} />\n      <Switch>\n        <Route path=\"/\" component={MainPage} exact />\n        <Route path=\"/cart\" component={CartPage} exact />\n        <Route path=\"/:id\" component={ItemPage} exact />\n      </Switch>\n    </div>\n  );\n};\n\n\n\n\nexport default WithRestoService()(App);\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, { Component } from \"react\";\nimport Error from \"../error\";\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    error: false,\n  };\n\n  componentDidCatch() {\n    this.setState({ error: true });\n  }\n  render() {\n    if (this.state.error) {\n      return <Error />;\n    }\n    return this.props.children;\n  }\n}\n","const data = `{ \r\n    \"menu\": [ \r\n        {\r\n            \"title\": \"Cesar salad\",\r\n            \"price\": 12,\r\n            \"url\": \"https://static.1000.menu/img/content/21458/-salat-cezar-s-kr-salat-cezar-s-krevetkami-s-maionezom_1501173720_1_max.jpg\",\r\n            \"category\": \"salads\",\r\n            \"id\": 1\r\n          },\r\n          {\r\n            \"title\": \"Pizza Margherita\",\r\n            \"price\": 10,\r\n            \"url\": \"https://www.pizzanapoletana.org/struttura/pagine_bicolor/mobile/decalogo_avpn_1.jpg\",\r\n            \"category\": \"pizza\",\r\n            \"id\": 2\r\n          },\r\n          {\r\n            \"title\": \"Pizza Napoletana\",\r\n            \"price\": 13,\r\n            \"url\": \"https://www.pizzanapoletana.org/struttura/pagine_bicolor/mobile/decalogo_avpn_1.jpg\",\r\n            \"category\": \"pizza\",\r\n            \"id\": 3\r\n          },\r\n          {\r\n            \"title\": \"Greece salad\",\r\n            \"price\": 8,\r\n            \"url\": \"https://assets.epicurious.com/photos/576454fb42e4a5ed66d1df6b/master/pass/greek-salad.jpg\",\r\n            \"category\": \"salads\",\r\n            \"id\": 4\r\n          },\r\n          {\r\n            \"title\": \"Cowboy Steak\",\r\n            \"price\": 25,\r\n            \"url\": \"https://i.cbc.ca/1.4491288.1516208229!/fileImage/httpImage/image.jpg_gen/derivatives/16x9_780/cowboysteak.jpg\",\r\n            \"category\": \"meat\",\r\n            \"id\": 5\r\n          }\r\n]}`;\r\n\r\nexport default class RestoService {\r\n  constructor() {\r\n    this._apiBase = \"http://localhost:3000\";\r\n   // console.log(JSON.parse(data));\r\n  }\r\n  getResorce = async (url) => {\r\n    const res = await fetch(`${this._apiBase}${url}`);\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fey ${url} status ${res.status}`);\r\n    }\r\n    const some = await res.json();\r\n\r\n    return some;\r\n  };\r\n\r\n  getMenuItems = async () => {\r\n   // const res = await this.getResorce(\"/menu/\");\r\n  let json = JSON.parse(data);\r\n   // console.log(json['menu']);\r\n    return json['menu'];\r\n  };\r\n  async getItem(id) {\r\n    const res = await this.getResource(\"/menu/\");\r\n    console.log(res);\r\n    const item = res.find((el) => {\r\n      console.log(`el.id: ${el.id}, id: ${id}`);\r\n      return el.id === +id;\r\n    });\r\n    console.log(item);\r\n    return item;\r\n  }\r\n\r\n  async setOrder(order) {\r\n    const number = await this.getOrderNumber();\r\n    const newOrder = {\r\n      id: number,\r\n      order: order,\r\n    };\r\n    const response = await fetch(`${this._apiBase}/orders`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=utf-8\",\r\n      },\r\n      body: JSON.stringify(newOrder),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(\"json error\");\r\n    }\r\n  }\r\n\r\n  async getOrderNumber() {\r\n    const res = await this.getResorce(\"/orders/\");\r\n    const orderNumber = res.length + 1;\r\n\r\n    return orderNumber;\r\n  }\r\n}\r\n","const initialState = {\r\n  menu: [],\r\n  loading: true,\r\n  error: false,\r\n  items:[ ],\r\n  totalPrice: 0\r\n};\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"MENU_LOADED\":\r\n      return {\r\n        ...state,\r\n        menu: action.payload,\r\n        loading: false,\r\n        error: false\r\n      };\r\n    case \"MENU_REQUSTED\":\r\n      return {\r\n        ...state,\r\n        menu: state.menu,\r\n        loading: true,\r\n        error: false\r\n      };\r\n\r\n    case \"MENU_ERROR\":\r\n      return {\r\n        ...state,\r\n        menu: state.menu,\r\n        loading: true,\r\n        error: true\r\n      };\r\n\r\n      case 'ITEM_ADD_TO_CART':\r\n        const id = action.payload;\r\n        \r\n        const itemInd = state.items.findIndex(item => item.id === id);\r\n        if (itemInd >= 0){\r\n            const itemInState = state.items.find(item => item.id === id);\r\n            const newItem = {\r\n                ...itemInState,\r\n                qtty: ++itemInState.qtty\r\n            }\r\n            return {\r\n                ...state, \r\n                items: [\r\n                    ...state.items.slice(0, itemInd),\r\n                    newItem,\r\n                    ...state.items.slice(itemInd + 1)\r\n                ],\r\n                totalPrice: state.totalPrice + newItem.price\r\n            }\r\n\r\n        } \r\n        // товара раньше не было в корзине\r\n        const item = state.menu.find(item => item.id === id);\r\n        const newItem = {\r\n            title: item.title,\r\n            price: item.price,\r\n            url: item.url,\r\n            id: item.id,\r\n            qtty: 1\r\n        };\r\n        \r\n        return {\r\n            ...state,\r\n            items: [\r\n                ...state.items,\r\n                newItem\r\n            ],\r\n            totalPrice: state.totalPrice + newItem.price\r\n        };\r\n\r\n          case 'ITEM_REMOVE_FROM_CART':\r\n            const idx = action.payload;\r\n            const itemIndex = state.items.findIndex(item => item.id === idx)\r\n            const price = state.items[itemIndex]['price'] * state.items[itemIndex]['qtty'];\r\n            return {\r\n                ...state, \r\n                items: [\r\n                    ...state.items.slice(0, itemIndex),\r\n                    ...state.items.slice(itemIndex + 1)\r\n                ], \r\n                totalPrice: state.totalPrice - price\r\n            }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import {createStore} from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/app\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport ErrorBoundry from \"./components/error-boundry\";\nimport RestoService from \"./services/resto-service\";\nimport RestoServiceContext from \"./components/resto-service-context\";\nimport store from \"./store\";\n\nimport \"./index.scss\";\nconst restoService = new RestoService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <RestoServiceContext.Provider value={restoService}>\n        <Router>\n          <App />\n        </Router>\n      </RestoServiceContext.Provider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}